<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R Interface for CrowdTangle Facebook API • rtangle</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="R Interface for CrowdTangle Facebook API">
<meta property="og:description" content="R Interface for CrowdTangle Facebook API.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rtangle</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="rtangle" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#rtangle" class="anchor"></a>rtangle</h1></div>
<!-- badges: start -->

<div id="installation-and-loading" class="section level2">
<h2 class="hasAnchor">
<a href="#installation-and-loading" class="anchor"></a>Installation and Loading</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"schliebs/rtangle"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">rtangle</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org">purrr</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="api-authentication" class="section level2">
<h2 class="hasAnchor">
<a href="#api-authentication" class="anchor"></a>API Authentication</h2>
<p>There are two options to set a CT API token and save it in the system environment. The first one is to trigger an RStudio window opening, and entering the token.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/set_crowdtangle_token.html">set_crowdtangle_token</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"enter"</span><span class="op">)</span></code></pre></div>
<p>The second option is to store the CT token as a txt file in a secure local location that is not synched with git or shared with other users.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/set_crowdtangle_token.html">set_crowdtangle_token</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"txt"</span>,
                      tokenpath <span class="op">=</span> <span class="st">"./nogit/confidential/CT_token.txt"</span><span class="op">)</span></code></pre></div>
<p>Now, when calling a function that uses the API, the token can be passed by using <code><a href="reference/crowdtangle_token.html">crowdtangle_token()</a></code> as an argument to the function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/crowdtangle_token.html">crowdtangle_token</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="ct-post-search" class="section level2">
<h2 class="hasAnchor">
<a href="#ct-post-search" class="anchor"></a>CT Post Search</h2>
<p>With the <code>posts_search</code> wrapper, you can search posts, either globally within the whole CT database, or within a limited set of <code>AccountIds</code> or <code>ListIds</code>. Note that this endpoint is not available to all customers and needs to be requested and approved by the CT team.</p>
<p>Currently, the following parameters are available withint post_search</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/posts_search.html">posts_search</a></span><span class="op">(</span>
  <span class="va">token</span>,
  accountTypes <span class="op">=</span> <span class="cn">NULL</span>,
  and <span class="op">=</span> <span class="cn">NULL</span>,
  brandedContent <span class="op">=</span> <span class="st">"no_filter"</span>,
  count <span class="op">=</span> <span class="fl">10</span>,
  endDate <span class="op">=</span> <span class="fu">rtangle</span><span class="fu">:::</span><span class="fu">ct_now</span><span class="op">(</span><span class="op">)</span>,
  includeHistory <span class="op">=</span> <span class="cn">NULL</span>,
  inAccountIds <span class="op">=</span> <span class="cn">NULL</span>,
  inListIds <span class="op">=</span> <span class="cn">NULL</span>,
  language <span class="op">=</span> <span class="cn">NULL</span>,
  minInteractions <span class="op">=</span> <span class="fl">0</span>,
  minSubscriberCount <span class="op">=</span> <span class="fl">0</span>,
  not <span class="op">=</span> <span class="cn">NULL</span>,
  notInAccountIds <span class="op">=</span> <span class="cn">NULL</span>,
  notInLstIds <span class="op">=</span> <span class="cn">NULL</span>,
  notInTitle <span class="op">=</span> <span class="cn">NULL</span>,
  offset <span class="op">=</span> <span class="fl">0</span>,
  pageAdminTopCountry <span class="op">=</span> <span class="cn">NULL</span>,
  platforms <span class="op">=</span> <span class="cn">NULL</span>,
  searchField <span class="op">=</span> <span class="st">"text_fields_and_image_text"</span>,
  searchTerm <span class="op">=</span> <span class="st">""</span>,
  startDate <span class="op">=</span> <span class="cn">NULL</span>,
  sortBy <span class="op">=</span> <span class="st">"date"</span>,
  timeframe <span class="op">=</span> <span class="cn">NULL</span>,
  types <span class="op">=</span> <span class="cn">NULL</span>,
  verified <span class="op">=</span> <span class="st">"no_filter"</span>,
  verifiedOnly <span class="op">=</span> <span class="st">"false"</span>,
  search10k <span class="op">=</span> <span class="cn">FALSE</span>,
  boolean_allowed <span class="op">=</span> <span class="cn">FALSE</span>,
  output_raw <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p>See further <code><a href="reference/posts_search.html">help(posts_search)</a></code> for additional infomation on available options and parameters.</p>
<p>As an example, we query the API for all posts made by CNN’s Facebook page in November 2020 which contained the term ‘Trump’. We also limit the results to posts on Facebook, and specify that our accoun has elevated search priviledges, allowing us to pull 10,000 posts at a time.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cnn_postlist</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="reference/posts_search.html">posts_search</a></span><span class="op">(</span>token <span class="op">=</span> <span class="fu"><a href="reference/crowdtangle_token.html">crowdtangle_token</a></span><span class="op">(</span><span class="op">)</span>,
               inAccountIds <span class="op">=</span> <span class="st">"8323"</span>, <span class="co">#CNN CT ID obtained via `list_details()`</span>
               searchTerm <span class="op">=</span> <span class="st">"Trump"</span>,
               startDate <span class="op">=</span> <span class="st">"2020-11-01T00:00:00"</span>,
               endDate <span class="op">=</span> <span class="st">"2020-11-30T23:59:59"</span>,
               count <span class="op">=</span> <span class="fl">10000</span>,
               sortBy <span class="op">=</span> <span class="st">'date'</span>,
               platforms <span class="op">=</span> <span class="st">'facebook'</span>,
               search10k <span class="op">=</span> <span class="cn">T</span>,
               boolean_allowed <span class="op">=</span> <span class="cn">T</span>,
               output_raw <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; [1] "collecting posts"</span>
<span class="co">#&gt; [1] "try for the 1th time."</span>
<span class="co">#&gt; [1] "now collected 272 entries"</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">cnn_postlist</span><span class="op">)</span>
<span class="co">#&gt; [1] "list"</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">cnn_postlist</span><span class="op">)</span>
<span class="co">#&gt; [1] 272</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cnn_postlist</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; List of 18</span>
<span class="co">#&gt;  $ platformId     : chr "5550296508_10161518326346509"</span>
<span class="co">#&gt;  $ platform       : chr "Facebook"</span>
<span class="co">#&gt;  $ date           : chr "2020-11-30 21:30:37"</span>
<span class="co">#&gt;  $ updated        : chr "2020-12-07 16:34:29"</span>
<span class="co">#&gt;  $ type           : chr "link"</span>
<span class="co">#&gt;  $ title          : chr "Trump said the stock market would crash if Biden won. The Dow is having its best month since 1987."</span>
<span class="co">#&gt;  $ caption        : chr "cnn.com"</span>
<span class="co">#&gt;  $ message        : chr "President Donald J. Trump repeatedly warned Americans that if they failed to reelect him, the stock market woul"| __truncated__</span>
<span class="co">#&gt;  $ expandedLinks  :List of 1</span>
<span class="co">#&gt;   ..$ :List of 2</span>
<span class="co">#&gt;   .. ..$ original: chr "https://cnn.it/3fS1yIP"</span>
<span class="co">#&gt;   .. ..$ expanded: chr "https://www.cnn.com/2020/11/30/business/stock-market-dow-jones-trump-biden/index.html?utm_medium=social&amp;utm_sou"| __truncated__</span>
<span class="co">#&gt;  $ link           : chr "https://cnn.it/3fS1yIP"</span>
<span class="co">#&gt;  $ postUrl        : chr "https://www.facebook.com/cnn/posts/10161518326346509"</span>
<span class="co">#&gt;  $ subscriberCount: int 34026501</span>
<span class="co">#&gt;  $ score          : num 17.1</span>
<span class="co">#&gt;  $ media          :List of 1</span>
<span class="co">#&gt;   ..$ :List of 5</span>
<span class="co">#&gt;   .. ..$ type  : chr "photo"</span>
<span class="co">#&gt;   .. ..$ url   : chr "https://external-sea1-1.xx.fbcdn.net/safe_image.php?d=AQBLnCLBTxgZBFRx&amp;w=619&amp;h=619&amp;url=https%3A%2F%2Fcdn.cnn.co"| __truncated__</span>
<span class="co">#&gt;   .. ..$ height: int 619</span>
<span class="co">#&gt;   .. ..$ width : int 619</span>
<span class="co">#&gt;   .. ..$ full  : chr "https://external-sea1-1.xx.fbcdn.net/safe_image.php?d=AQBdtsImuhon9qEa&amp;url=https%3A%2F%2Fcdn.cnn.com%2Fcnnnext%"| __truncated__</span>
<span class="co">#&gt;  $ statistics     :List of 2</span>
<span class="co">#&gt;   ..$ actual  :List of 10</span>
<span class="co">#&gt;   .. ..$ likeCount    : int 52914</span>
<span class="co">#&gt;   .. ..$ shareCount   : int 7828</span>
<span class="co">#&gt;   .. ..$ commentCount : int 22180</span>
<span class="co">#&gt;   .. ..$ loveCount    : int 9397</span>
<span class="co">#&gt;   .. ..$ wowCount     : int 468</span>
<span class="co">#&gt;   .. ..$ hahaCount    : int 27454</span>
<span class="co">#&gt;   .. ..$ sadCount     : int 65</span>
<span class="co">#&gt;   .. ..$ angryCount   : int 171</span>
<span class="co">#&gt;   .. ..$ thankfulCount: int 0</span>
<span class="co">#&gt;   .. ..$ careCount    : int 240</span>
<span class="co">#&gt;   ..$ expected:List of 10</span>
<span class="co">#&gt;   .. ..$ likeCount    : int 4129</span>
<span class="co">#&gt;   .. ..$ shareCount   : int 514</span>
<span class="co">#&gt;   .. ..$ commentCount : int 1492</span>
<span class="co">#&gt;   .. ..$ loveCount    : int 212</span>
<span class="co">#&gt;   .. ..$ wowCount     : int 149</span>
<span class="co">#&gt;   .. ..$ hahaCount    : int 232</span>
<span class="co">#&gt;   .. ..$ sadCount     : int 175</span>
<span class="co">#&gt;   .. ..$ angryCount   : int 152</span>
<span class="co">#&gt;   .. ..$ thankfulCount: int 0</span>
<span class="co">#&gt;   .. ..$ careCount    : int 61</span>
<span class="co">#&gt;  $ account        :List of 11</span>
<span class="co">#&gt;   ..$ id                 : int 8323</span>
<span class="co">#&gt;   ..$ name               : chr "CNN"</span>
<span class="co">#&gt;   ..$ handle             : chr "cnn"</span>
<span class="co">#&gt;   ..$ profileImage       : chr "https://scontent-sjc3-1.xx.fbcdn.net/v/t31.0-1/p200x200/12304053_10154246192721509_1897912583584847639_o.png?_n"| __truncated__</span>
<span class="co">#&gt;   ..$ subscriberCount    : int 34036958</span>
<span class="co">#&gt;   ..$ url                : chr "https://www.facebook.com/5550296508"</span>
<span class="co">#&gt;   ..$ platform           : chr "Facebook"</span>
<span class="co">#&gt;   ..$ platformId         : chr "5550296508"</span>
<span class="co">#&gt;   ..$ accountType        : chr "facebook_page"</span>
<span class="co">#&gt;   ..$ pageAdminTopCountry: chr "US"</span>
<span class="co">#&gt;   ..$ verified           : logi TRUE</span>
<span class="co">#&gt;  $ newId          : chr "8323|10161518326346509"</span>
<span class="co">#&gt;  $ id             : num 1.12e+11</span></code></pre></div>
</div>
<div id="parsing-posts" class="section level2">
<h2 class="hasAnchor">
<a href="#parsing-posts" class="anchor"></a>Parsing Posts</h2>
<p>We can now parse the list of <code>CT Post</code> objects into an R data.frame:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cnn_df</span> <span class="op">&lt;-</span> <span class="va">cnn_postlist</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/parse_posts.html">parse_posts</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">cnn_df</span><span class="op">)</span>
<span class="co">#&gt;  [1] "platformId"                        "platform"                         </span>
<span class="co">#&gt;  [3] "date"                              "updated"                          </span>
<span class="co">#&gt;  [5] "type"                              "title"                            </span>
<span class="co">#&gt;  [7] "caption"                           "message"                          </span>
<span class="co">#&gt;  [9] "link"                              "postUrl"                          </span>
<span class="co">#&gt; [11] "subscriberCount"                   "score"                            </span>
<span class="co">#&gt; [13] "statistics.actual.likeCount"       "statistics.actual.shareCount"     </span>
<span class="co">#&gt; [15] "statistics.actual.commentCount"    "statistics.actual.loveCount"      </span>
<span class="co">#&gt; [17] "statistics.actual.wowCount"        "statistics.actual.hahaCount"      </span>
<span class="co">#&gt; [19] "statistics.actual.sadCount"        "statistics.actual.angryCount"     </span>
<span class="co">#&gt; [21] "statistics.actual.thankfulCount"   "statistics.actual.careCount"      </span>
<span class="co">#&gt; [23] "statistics.expected.likeCount"     "statistics.expected.shareCount"   </span>
<span class="co">#&gt; [25] "statistics.expected.commentCount"  "statistics.expected.loveCount"    </span>
<span class="co">#&gt; [27] "statistics.expected.wowCount"      "statistics.expected.hahaCount"    </span>
<span class="co">#&gt; [29] "statistics.expected.sadCount"      "statistics.expected.angryCount"   </span>
<span class="co">#&gt; [31] "statistics.expected.thankfulCount" "statistics.expected.careCount"    </span>
<span class="co">#&gt; [33] "account.id"                        "account.name"                     </span>
<span class="co">#&gt; [35] "account.handle"                    "account.profileImage"             </span>
<span class="co">#&gt; [37] "account.subscriberCount"           "account.url"                      </span>
<span class="co">#&gt; [39] "account.platform"                  "account.platformId"               </span>
<span class="co">#&gt; [41] "account.accountType"               "account.pageAdminTopCountry"      </span>
<span class="co">#&gt; [43] "account.verified"                  "newId"                            </span>
<span class="co">#&gt; [45] "id"                                "n_urls"                           </span>
<span class="co">#&gt; [47] "original_urls"                     "expanded_urls"                    </span>
<span class="co">#&gt; [49] "n_media"                           "media_type"                       </span>
<span class="co">#&gt; [51] "media_url"                         "media_height"                     </span>
<span class="co">#&gt; [53] "media_width"                       "description"                      </span>
<span class="co">#&gt; [55] "videoLengthMS"                     "liveVideoStatus"                  </span>
<span class="co">#&gt; [57] "imageText"</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="va">cnn_by_day</span> <span class="op">&lt;-</span> 
  <span class="va">cnn_df</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>day <span class="op">=</span> <span class="va">date</span> <span class="op">%&gt;%</span> 
           <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/as_date.html">as_datetime</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
           <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/round_date.html">round_date</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">day</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">cnn_by_day</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">day</span>,
           y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Day"</span>,
       y <span class="op">=</span> <span class="st">"CNN Posts mentioning 'Trump'"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-13-1.png" width="100%"></p>
</div>
<div id="link-search" class="section level2">
<h2 class="hasAnchor">
<a href="#link-search" class="anchor"></a>Link Search</h2>
<p>Search all link shares of “rt.com” on December 7th, 2020</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rt_postlist</span> <span class="op">&lt;-</span>
 <span class="fu"><a href="reference/links.html">links</a></span><span class="op">(</span>token <span class="op">=</span> <span class="fu"><a href="reference/crowdtangle_token.html">crowdtangle_token</a></span><span class="op">(</span><span class="op">)</span>,
       count <span class="op">=</span> <span class="fl">1000</span>,
       endDate <span class="op">=</span> <span class="st">'2020-12-07T23:59:59'</span>,
       includeHistory <span class="op">=</span> <span class="cn">NULL</span>,
       link <span class="op">=</span> <span class="st">"rt.com"</span>,
       includeSummary<span class="op">=</span> <span class="st">'false'</span>,
       offset <span class="op">=</span> <span class="fl">0</span>,
       platforms <span class="op">=</span> <span class="st">'facebook'</span>,
       searchField <span class="op">=</span> <span class="st">'Include_query_strings'</span>,
       startDate <span class="op">=</span> <span class="st">'2020-12-07T00:00:00'</span>,
       sortBy <span class="op">=</span> <span class="st">'date'</span><span class="op">)</span>
<span class="co">#&gt; [1] "collecting link shares"</span>
<span class="co">#&gt; [1] "try for the 1th time."</span>
<span class="co">#&gt; [1] "resetting END DATE to 2020-12-07T17:33:57"</span>
<span class="co">#&gt; [1] "Pausing Scripts until 2020-12-08 10:43:28"</span>
<span class="co">#&gt; [1] "sleep 31 secs then next batch"</span>
<span class="co">#&gt; [1] "try for the 1th time."</span>
<span class="co">#&gt; [1] "resetting END DATE to 2020-12-07T09:18:21"</span>
<span class="co">#&gt; [1] "Pausing Scripts until 2020-12-08 10:44:00"</span>
<span class="co">#&gt; [1] "sleep 31 secs then next batch"</span>
<span class="co">#&gt; [1] "try for the 1th time."</span>
<span class="co">#&gt; [1] "resetting END DATE to 2020-12-07T00:00:00"</span>
<span class="co">#&gt; [1] "now collected 2558 entries"</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rt_df</span> <span class="op">&lt;-</span> 
  <span class="va">rt_postlist</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="reference/parse_posts.html">parse_posts</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rt_df</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">statistics.actual.likeCount</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">date</span>,<span class="va">link</span>,<span class="va">subscriberCount</span>,<span class="va">statistics.actual.likeCount</span>,<span class="va">title</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>title <span class="op">=</span> <span class="va">title</span> <span class="op">%&gt;%</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>link <span class="op">=</span> <span class="va">link</span> <span class="op">%&gt;%</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 5</span>
<span class="co">#&gt;   date      link             subscriberCount statistics.actual~ title           </span>
<span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;                      &lt;int&gt;              &lt;int&gt; &lt;chr&gt;           </span>
<span class="co">#&gt; 1 2020-12-~ https://arabic.~        16218229              17491 "&lt;U+0627&gt;&lt;U+0644&gt;&lt;U+062C&gt;&lt;U+0632&gt;&lt;U+0627&gt;&lt;U+0626&gt;&lt;U+0631&gt; &lt;U+062A&gt;&lt;U+062D&gt;&lt;U+062C&gt;&lt;U+0632&gt; &lt;U+0637&gt;~</span>
<span class="co">#&gt; 2 2020-12-~ https://www.fac~          416724              10580  &lt;NA&gt;           </span>
<span class="co">#&gt; 3 2020-12-~ https://arabic.~          783377               8768 "&lt;U+0635&gt;&lt;U+0644&gt;&lt;U+0627&gt;&lt;U+062D&gt; &lt;U+064A&gt;&lt;U+0648&gt;&lt;U+0627&gt;&lt;U+0635&gt;&lt;U+0644&gt; &lt;U+0647&gt;&lt;U+064A&gt;&lt;U+0645&gt;~</span>
<span class="co">#&gt; 4 2020-12-~ https://arabic.~        16218229               8288 "&lt;U+062E&gt;&lt;U+0628&gt;&lt;U+064A&gt;&lt;U+0631&gt; &lt;U+0625&gt;&lt;U+0633&gt;&lt;U+0631&gt;&lt;U+0627&gt;&lt;U+0626&gt;&lt;U+064A&gt;&lt;U+0644&gt;&lt;U+064A&gt;:~</span>
<span class="co">#&gt; 5 2020-12-~ https://arabic.~        16218229               7180 "&lt;U+0643&gt;&lt;U+064A&gt;&lt;U+0641&gt; &lt;U+0631&gt;&lt;U+062F&gt; &lt;U+0635&gt;&lt;U+062F&gt;&lt;U+0627&gt;&lt;U+0645&gt; &lt;U+062D&gt;&lt;U+0633&gt;~</span>
<span class="co">#&gt; 6 2020-12-~ https://arabic.~        16218229               6662 "&lt;U+0637&gt;&lt;U+0647&gt;&lt;U+0631&gt;&lt;U+0627&gt;&lt;U+0646&gt; &lt;U+062A&gt;&lt;U+0631&gt;&lt;U+062F&gt; &lt;U+0639&gt;&lt;U+0644&gt;&lt;U+0649&gt; ~</span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rt_df</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">link</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>likes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">statistics.actual.likeCount</span>,na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,
            audience <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">subscriberCount</span>,na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">likes</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>link <span class="op">=</span> <span class="va">link</span> <span class="op">%&gt;%</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">70</span><span class="op">)</span><span class="op">)</span><span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 20 x 3</span>
<span class="co">#&gt;    link                                                           likes audience</span>
<span class="co">#&gt;    &lt;chr&gt;                                                          &lt;int&gt;    &lt;int&gt;</span>
<span class="co">#&gt;  1 https://arabic.rt.com/press/1180616-%D8%A7%D9%84%D8%AC%D8%B2%~ 17613 16863919</span>
<span class="co">#&gt;  2 https://www.facebook.com/environman.th/photos/a.1745027465625~ 11351  1109358</span>
<span class="co">#&gt;  3 https://arabic.rt.com/sport/1180604-%D8%B5%D9%84%D8%A7%D8%AD-~  9040 17033130</span>
<span class="co">#&gt;  4 https://arabic.rt.com/world/1180580-%D9%83%D8%B4%D9%81-%D8%A7~  8288 16218229</span>
<span class="co">#&gt;  5 https://arabic.rt.com/middle_east/1180637-%D8%A7%D8%AE%D8%AA%~  7492 41671880</span>
<span class="co">#&gt;  6 https://arabic.rt.com/middle_east/1180588-%D9%83%D9%8A%D9%81-~  7187 16249241</span>
<span class="co">#&gt;  7 https://arabic.rt.com/world/1180662-%D8%A7%D9%84%D8%AE%D8%A7%~  6662 16218229</span>
<span class="co">#&gt;  8 https://arabic.rt.com/world/1180612-%D9%85%D9%88%D9%82%D8%B9-~  5029 16218229</span>
<span class="co">#&gt;  9 https://arabic.rt.com/middle_east/1180904-%D8%AC%D9%8A%D9%81%~  4912 16218229</span>
<span class="co">#&gt; 10 https://actualidad.rt.com/actualidad/376020-chavismo-lidera-e~  4832 18588103</span>
<span class="co">#&gt; 11 https://arabic.rt.com/russia/1180897-%D8%B3%D9%8A%D9%86%D8%A7~  4707 16333114</span>
<span class="co">#&gt; 12 https://actualidad.rt.com/actualidad/376048-farmaco-oral-moln~  4475 16949999</span>
<span class="co">#&gt; 13 https://arabic.rt.com/world/1180607-%D8%A7%D8%AC%D8%AA%D9%81%~  4368 16334659</span>
<span class="co">#&gt; 14 https://arabic.rt.com/world/1180896-%D8%A7%D9%84%D9%85%D9%82%~  3579 16218229</span>
<span class="co">#&gt; 15 https://arabic.rt.com/middle_east/1180772-%D9%85%D8%A7%D9%83%~  3558 17790087</span>
<span class="co">#&gt; 16 https://arabic.rt.com/middle_east/1180788-%D9%85%D8%A7%D9%83%~  3541 16235318</span>
<span class="co">#&gt; 17 https://arabic.rt.com/technology/1180729-%D8%AF%D8%B1%D9%88%D~  2950 16223035</span>
<span class="co">#&gt; 18 https://arabic.rt.com/middle_east/1180834-%D8%A7%D8%AD%D8%AA%~  2827 16244435</span>
<span class="co">#&gt; 19 https://arabic.rt.com/middle_east/1180765-%D9%85%D8%A7%D9%83%~  2572 16218229</span>
<span class="co">#&gt; 20 https://arabic.rt.com/world/1180609-%D9%88%D9%81%D8%A7%D8%A9-~  2471 16218229</span></code></pre></div>
</div>
<div id="adaptive-time-frame-adjustment-and-pagination" class="section level2">
<h2 class="hasAnchor">
<a href="#adaptive-time-frame-adjustment-and-pagination" class="anchor"></a>Adaptive Time-Frame adjustment and Pagination</h2>
<p>t.b.c.</p>
</div>
<div id="additional-helper-functions-made-available-via-namespace-export" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-helper-functions-made-available-via-namespace-export" class="anchor"></a>Additional Helper Functions made available via Namespace Export</h2>
<div id="adaptive-waiting-and-sleeping-to-respect-api-limits" class="section level3">
<h3 class="hasAnchor">
<a href="#adaptive-waiting-and-sleeping-to-respect-api-limits" class="anchor"></a>Adaptive Waiting and Sleeping to Respect API Limits</h3>
<p>Continue script after 20:30:34 on November 14th 2020</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">continue_at</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/as_date.html">as_datetime</a></span><span class="op">(</span><span class="st">"2020-11-14 20:30:34"</span><span class="op">)</span>
<span class="fu"><a href="reference/wait_till.html">wait_till</a></span><span class="op">(</span>resume <span class="op">=</span> <span class="va">continue_at</span>, seconds <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></code></pre></div>
<p>Continue script 60 seconds after the last call was made:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">last_timestamp</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/now.html">now</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># ... (Some function is executed)</span>
<span class="fu"><a href="reference/wait_till.html">wait_till</a></span><span class="op">(</span>from <span class="op">=</span> <span class="va">last_timestamp</span>, seconds <span class="op">=</span> <span class="fl">60</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Marcel Schliebs <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/YOUR-ORCID-ID" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=ggecon"><img src="https://www.r-pkg.org/badges/version/ggecon" alt="CRAN status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Marcel Schliebs.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
